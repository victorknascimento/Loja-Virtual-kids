
<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Juju Kids - Moda Infantil</title>
    
    <!-- Fontes -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <!-- Apenas Raleway é necessário agora, mas mantendo as outras para fallback -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700&family=Poppins:wght@400;500;600;700&family=Raleway:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <!-- Estilos Locais (Uso de ./ para garantir caminho relativo) -->
    <link rel="stylesheet" href="./style.css">
</head>
<body>

    <!-- HEADER -->
    <header class="header">
        <div class="container header-content">
            
            <!-- Logo + Subtítulo (Esquerda) -->
            <a href="#" class="logo-container" onclick="app.router('home'); return false;">
                <!-- 
                   LOGO: Buscando arquivo local 'logo.png'.
                   O usuário deve salvar a imagem dele com este nome na pasta raiz.
                -->
                <img src="./logo.png" alt="Juju Kids Logo" class="logo-img">
                
                <span class="logo-subtitle">Loja Virtual</span>
            </a>
            
            <!-- Lado Direito: Status + Nav -->
            <div class="header-right">
                
                <!-- Status da Loja (Movido para cá) -->
                <div id="store-status" class="header-status">
                    <!-- Inserido via JS -->
                </div>

                <nav class="nav-links">
                    <!-- Link Admin (Invisível se não for admin) -->
                    <a href="#" id="nav-admin" class="hidden" onclick="app.router('admin'); return false;">Admin</a>

                    <!-- Carrinho -->
                    <a href="#" class="cart-icon-container" onclick="app.router('cart'); return false;">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="9" cy="21" r="1"></circle><circle cx="20" cy="21" r="1"></circle><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path></svg>
                        <span id="cart-count" class="cart-badge hidden">0</span>
                    </a>

                    <!-- Área do Usuário -->
                    <div id="user-area">
                        <button id="btn-login-nav" class="btn-outline-light" onclick="app.router('login')">Login</button>
                        <div id="user-logged-in" class="hidden">
                            <span id="user-name-display"></span>
                            <button class="btn-text-light" onclick="app.logout()">Sair</button>
                        </div>
                    </div>
                </nav>
            </div>
        </div>
    </header>

    <!-- MAIN CONTENT -->
    <main class="container main-content">
        
        <!-- Mensagem de Erro caso JS não carregue -->
        <noscript>
            <div style="padding: 20px; color: red; text-align: center;">
                Este site precisa de JavaScript para funcionar. Por favor, ative-o no seu navegador.
            </div>
        </noscript>
        
        <!-- VIEW: HOME -->
        <section id="view-home" class="view">
            <!-- Banner status removido daqui -->

            <div id="products-grid" class="products-grid">
                <!-- Produtos inseridos via JS -->
                <p style="text-align:center; width:100%;">Carregando produtos...</p>
            </div>
        </section>

        <!-- VIEW: LOGIN -->
        <section id="view-login" class="view hidden">
            <div class="auth-card">
                <h2>Login</h2>
                <div id="login-error" class="alert-error hidden"></div>
                <form onsubmit="app.handleLogin(event)">
                    <div class="form-group">
                        <label>Telefone / WhatsApp</label>
                        <input type="tel" id="login-phone" placeholder="Ex: 5585999998888" required>
                    </div>
                    <button type="submit" class="btn-primary full-width">Entrar</button>
                </form>
                <p class="auth-footer">
                    Não tem uma conta? <a href="#" onclick="app.router('register'); return false;">Cadastre-se</a>
                </p>
            </div>
        </section>

        <!-- VIEW: REGISTER -->
        <section id="view-register" class="view hidden">
            <div class="auth-card">
                <h2>Cadastro</h2>
                <div id="register-error" class="alert-error hidden"></div>
                <form onsubmit="app.handleRegister(event)">
                    <div class="form-group">
                        <label>Nome Completo</label>
                        <input type="text" id="reg-name" required>
                    </div>
                    <div class="form-group">
                        <label>Telefone / WhatsApp</label>
                        <input type="tel" id="reg-phone" placeholder="Ex: 5585999998888" required>
                    </div>
                    <button type="submit" class="btn-primary full-width">Cadastrar</button>
                </form>
                <p class="auth-footer">
                    Já tem conta? <a href="#" onclick="app.router('login'); return false;">Faça login</a>
                </p>
            </div>
        </section>

        <!-- VIEW: CART -->
        <section id="view-cart" class="view hidden">
            <h2>Carrinho de Compras</h2>
            <div id="cart-items-container">
                <!-- Itens do carrinho ou mensagem de vazio -->
            </div>
            <div id="cart-summary" class="cart-summary hidden">
                <h3>Total: <span id="cart-total">R$ 0,00</span></h3>
                <button class="btn-primary" onclick="app.router('checkout')">Finalizar Compra</button>
            </div>
        </section>

        <!-- VIEW: CHECKOUT -->
        <section id="view-checkout" class="view hidden">
            <div class="checkout-grid">
                <div class="card">
                    <h3>Endereço de Entrega</h3>
                    <form onsubmit="app.handleCheckout(event)">
                        <div class="form-group">
                            <label>Rua e Número</label>
                            <input type="text" id="addr-street" required>
                        </div>
                        <div class="form-group">
                            <label>Cidade</label>
                            <input type="text" id="addr-city" value="Fortaleza" required>
                        </div>
                        <div class="form-group">
                            <label>CEP</label>
                            <input type="text" id="addr-zip" required>
                        </div>
                        <button type="submit" class="btn-primary full-width mt-4">Confirmar Pedido no WhatsApp</button>
                    </form>
                </div>
                <div class="card bg-gray">
                    <h3>Resumo</h3>
                    <div id="checkout-summary">
                        <!-- Resumo preenchido via JS -->
                    </div>
                </div>
            </div>
        </section>

        <!-- VIEW: CONFIRMATION -->
        <section id="view-confirmation" class="view hidden">
            <div class="confirmation-card">
                <div class="success-icon">✓</div>
                <h2>Obrigado pela compra!</h2>
                <p>Seu pedido foi gerado. Verifique seu WhatsApp para enviar a mensagem.</p>
                <div class="info-box">
                    Prazo de entrega estimado: 30 a 60 minutos.
                </div>
                <button class="btn-primary mt-4" onclick="app.router('home')">Voltar para Loja</button>
            </div>
        </section>

        <!-- VIEW: ADMIN DASHBOARD -->
        <section id="view-admin" class="view hidden">
            <h2>Painel Admin</h2>
            <div class="admin-tabs">
                <button class="btn-tab active" onclick="app.switchAdminTab('products')">Produtos</button>
                <button class="btn-tab" onclick="app.switchAdminTab('orders')">Pedidos</button>
                <button class="btn-tab" onclick="app.switchAdminTab('users')">Usuários</button>
            </div>

            <!-- Admin: Produtos -->
            <div id="admin-tab-products" class="admin-section">
                <div class="flex-between">
                    <h3>Gerenciar Produtos</h3>
                    <button class="btn-dark" onclick="app.openProductModal()">+ Novo Produto</button>
                </div>
                <div class="table-responsive">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Img</th>
                                <th>Nome</th>
                                <th>Preço</th>
                                <th>Ações</th>
                            </tr>
                        </thead>
                        <tbody id="admin-products-list"></tbody>
                    </table>
                </div>
            </div>

            <!-- Admin: Pedidos -->
            <div id="admin-tab-orders" class="admin-section hidden">
                <h3>Pedidos Realizados</h3>
                <div id="admin-orders-list" class="orders-list"></div>
            </div>

            <!-- Admin: Usuários -->
            <div id="admin-tab-users" class="admin-section hidden">
                <h3>Usuários</h3>
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Nome</th>
                            <th>Telefone</th>
                            <th>Role</th>
                        </tr>
                    </thead>
                    <tbody id="admin-users-list"></tbody>
                </table>
            </div>
        </section>
    </main>

    <!-- Modal de Produto (Admin) -->
    <div id="modal-product" class="modal hidden">
        <div class="modal-content">
            <h3>Salvar Produto</h3>
            <form onsubmit="app.handleSaveProduct(event)">
                <input type="hidden" id="prod-id">
                
                <!-- Preview da imagem atual -->
                <div class="image-preview-container">
                    <img id="prod-image-preview" src="" class="image-preview" alt="Preview">
                </div>

                <div class="form-group">
                    <label>Imagem do Produto</label>
                    <!-- Mudança: Input File ao invés de Text -->
                    <input type="file" id="prod-image-file" accept="image/*">
                    <small style="color: #666; font-size: 0.8rem;">Escolha da galeria ou câmera. Deixe vazio para manter a atual.</small>
                    <!-- Input hidden para manter a URL anterior se não mudar -->
                    <input type="hidden" id="prod-image-current">
                </div>

                <div class="form-group">
                    <label>Nome</label>
                    <input type="text" id="prod-name" required>
                </div>
                <div class="form-group">
                    <label>Categoria</label>
                    <input type="text" id="prod-category" required>
                </div>
                <div class="form-group">
                    <label>Preço</label>
                    <input type="number" step="0.01" id="prod-price" required>
                </div>
                <div class="form-group">
                    <label>Descrição</label>
                    <textarea id="prod-desc" rows="3"></textarea>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn-secondary" onclick="document.getElementById('modal-product').classList.add('hidden')">Cancelar</button>
                    <button type="submit" class="btn-dark">Salvar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- FOOTER -->
    <footer class="footer">
        <div class="container text-center">
            <h3>Juju Kids - Moda Infantil</h3>
            <p>R. Maria Júlia, 676 - Bom jardim, Fortaleza</p>
            <p>Telefone: 5585999195930</p>
            <p class="copyright">© 2025 Juju Kids</p>
        </div>
    </footer>

    <!-- Script (Uso de ./ para garantir caminho relativo) -->
    <script src="./script.js"></script>
</body>
</html>
